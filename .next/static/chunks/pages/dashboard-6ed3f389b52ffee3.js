(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{681:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>o});var a=t(7876),i=t(4232),s=t(8230),r=t.n(s);function o(){let[e,n]=(0,i.useState)("");return(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{children:"Admin Dashboard (Demo)"}),e?(0,a.jsx)(u,{token:e}):(0,a.jsx)(l,{onToken:n}),(0,a.jsx)("p",{children:(0,a.jsx)(r(),{href:"/",children:"Back home"})})]})}function l(e){let{onToken:n}=e,[t,s]=(0,i.useState)("admin@local"),[r,o]=(0,i.useState)("password");async function l(e){e.preventDefault();let a=await fetch("/api/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:t,password:r})}),i=await a.json();i.accessToken?n(i.accessToken):alert("error: "+(i.error||"login failed"))}return(0,a.jsxs)("form",{onSubmit:l,children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{value:t,onChange:e=>s(e.target.value)})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"password",value:r,onChange:e=>o(e.target.value)})}),(0,a.jsx)("button",{type:"submit",children:"Login"})]})}function u(e){let{token:n}=e,[t,s]=(0,i.useState)(null),[r,o]=(0,i.useState)();async function l(e){if(e.preventDefault(),!t)return alert("choose file");let a=new FormData;a.append("file",t);let i=await fetch("/api/citizens/upload",{method:"POST",headers:{Authorization:"Bearer "+n},body:a});o(await i.json())}return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"Upload Citizens CSV"}),(0,a.jsxs)("form",{onSubmit:l,children:[(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var n;return s((null==(n=e.target.files)?void 0:n[0])||null)}}),(0,a.jsx)("button",{type:"submit",children:"Upload"})]}),(0,a.jsx)("pre",{children:JSON.stringify(r,null,2)})]})}},7721:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(681)}])}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=7721)),_N_E=e.O()}]);